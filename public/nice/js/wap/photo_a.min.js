"use strict";var Mobify=window.Mobify=window.Mobify||{};Mobify.$=Mobify.$||window.Zepto||window.jQuery,Mobify.UI=Mobify.UI?Mobify.$.extend(Mobify.UI,{classPrefix:"m-"}):{classPrefix:"m-"},function(t,e){t.support=t.support||{},t.extend(t.support,{touch:"ontouchend"in e})}(Mobify.$,document),Mobify.UI.Utils=function(t){var e={},i=t.support,n=navigator.userAgent;e.events=i.touch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"},e.getCursorPosition=i.touch?function(t){return t=t.originalEvent||t,{x:t.touches[0].clientX,y:t.touches[0].clientY}}:function(t){return{x:t.clientX,y:t.clientY}},e.getProperty=function(t){for(var e=["Webkit","Moz","O","ms",""],i=document.createElement("div").style,n=0;e.length>n;++n)if(void 0!==i[e[n]+t])return e[n]+t},t.extend(i,{transform:!!e.getProperty("Transform"),transform3d:!(!(window.WebKitCSSMatrix&&"m11"in new WebKitCSSMatrix)||/android\s+[1-2]/i.test(n))});var a=e.getProperty("Transform");e.translateX=i.transform3d?function(t,e){"number"==typeof e&&(e+="px"),t.style[a]="translate3d("+e+",0,0)"}:i.transform?function(t,e){"number"==typeof e&&(e+="px"),t.style[a]="translate("+e+",0)"}:function(t,e){"number"==typeof e&&(e+="px"),t.style.left=e};var o=e.getProperty("TransitionDuration");return e.setTransitions=function(t,e){t.style[o]=e?"":"0s"},e.requestAnimationFrame=function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},e=function(){t.apply(window,arguments)};return e}(),e}(Mobify.$),Mobify.UI.Scooch=function(t,e){var i={dragRadius:10,moveRadius:20,animate:!0,classPrefix:void 0,classNames:{outer:"scooch",inner:"scooch-inner",item:"item",center:"center",touch:"has-touch",dragging:"dragging",active:"active",fluid:"fluid"}},n=t.support,a=function(t,e){this.setOptions(e),this.initElements(t),this.initOffsets(),this.initAnimation(),this.bind(),this._updateCallbacks=[]};return a.defaults=i,a.prototype.setOptions=function(e){var n=this.options||t.extend({},i,e);n.classNames=t.extend({},n.classNames,e.classNames||{}),n.classPrefix===void 0&&(n.classPrefix=Mobify.UI.classPrefix),this.options=n},a.prototype.initElements=function(e){this._index=1,this.element=e,this.$element=t(e),this.$inner=this.$element.find("."+this._getClass("inner")),this.$items=this.$inner.children(),this.$start=this.$items.eq(0),this.$sec=this.$items.eq(1),this.$current=this.$items.eq(this._index-1),this._length=this.$items.length,this._alignment=this.$element.hasClass(this._getClass("center"))?.5:0,this._isFluid=this.$element.hasClass(this._getClass("fluid"))},a.prototype.initOffsets=function(){this._offsetDrag=0},a.prototype.initAnimation=function(){this.animating=!1,this.dragging=!1,this._needsUpdate=!1,this._enableAnimation()},a.prototype._getClass=function(t){return this.options.classPrefix+this.options.classNames[t]},a.prototype._enableAnimation=function(){this.animating||(e.setTransitions(this.$inner[0],!0),this.$inner.removeClass(this._getClass("dragging")),this.animating=!0)},a.prototype._disableAnimation=function(){this.animating&&(e.setTransitions(this.$inner[0],!1),this.$inner.addClass(this._getClass("dragging")),this.animating=!1)},a.prototype.refresh=function(){this.$items=this.$inner.children("."+this._getClass("item")),this.$start=this.$items.eq(0),this.$sec=this.$items.eq(1),this._length=this.$items.length,this.update()},a.prototype.update=function(t){if(t!==void 0&&this._updateCallbacks.push(t),!this._needsUpdate){this._needsUpdate=!0;var i=this;e.requestAnimationFrame(function(){i._update(),setTimeout(function(){for(var t=0,e=i._updateCallbacks.length;e>t;t++)i._updateCallbacks[t].call(i);i._updateCallbacks=[]},10)})}},a.prototype._update=function(){if(this._needsUpdate){var t=this.$current,i=this.$start,n=t.prop("offsetLeft")+t.prop("clientWidth")*this._alignment,a=i.prop("offsetLeft")+i.prop("clientWidth")*this._alignment,o=Math.round(-(n-a)+this._offsetDrag);e.translateX(this.$inner[0],o),this._needsUpdate=!1}},a.prototype.bind=function(){function i(t){n.touch||t.preventDefault(),u=!0,f=!1,r=e.getCursorPosition(t),c=0,d=0,h=!1,g._disableAnimation(),$=1===g._index,v=g._index===g._length}function a(t){if(u&&!f){var i=e.getCursorPosition(t),n=g.$element.width();c=r.x-i.x,d=r.y-i.y,h||l(c)>l(d)&&l(c)>m?(h=!0,t.preventDefault(),$&&0>c?c=c*-n/(c-n):v&&c>0&&(c=c*n/(c+n)),g._offsetDrag=-c,g.update()):l(d)>l(c)&&l(d)>m&&(f=!0)}}function o(){u&&(u=!1,g._enableAnimation(),!f&&l(c)>_.moveRadius?c>0?g.next():g.prev():(g._offsetDrag=0,g.update()))}function s(t){h&&t.preventDefault()}var r,c,d,h,l=Math.abs,u=!1,f=!1,m=this.options.dragRadius,g=this,p=this.$element,w=this.$inner,_=this.options,$=!1,v=!1,b=t(window).width();w.on(e.events.down+".scooch",i).on(e.events.move+".scooch",a).on(e.events.up+".scooch",o).on("click.scooch",s).on("mouseout.scooch",o),p.on("click","[data-m-slide]",function(e){e.preventDefault();var i=t(this).attr("data-m-slide"),n=parseInt(i,10);isNaN(n)?g[i]():g.move(n)}),p.on("afterSlide",function(t,e,i){g.$items.eq(e-1).removeClass(g._getClass("active")),g.$items.eq(i-1).addClass(g._getClass("active")),g.$element.find("[data-m-slide='"+e+"']").removeClass(g._getClass("active")),g.$element.find("[data-m-slide='"+i+"']").addClass(g._getClass("active"))}),t(window).on("resize orientationchange",function(){b!==t(window).width()&&(g._disableAnimation(),b=t(window).width(),g.update())}),p.trigger("beforeSlide",[1,1]),p.trigger("afterSlide",[1,1]),g.update()},a.prototype.unbind=function(){this.$inner.off()},a.prototype.destroy=function(){this.unbind(),this.$element.trigger("destroy"),this.$element.remove(),this.$element=null,this.$inner=null,this.$start=null,this.$current=null},a.prototype.move=function(e,i){var n=this.$element,a=this.$items,o=this.$current,s=this._length,r=this._index;i=t.extend({},this.options,i),1>e?e=1:e>this._length&&(e=s),e===this._index,i.animate?this._enableAnimation():this._disableAnimation(),n.trigger("beforeSlide",[r,e]),this.$current=o=a.eq(e-1),this._offsetDrag=0,this._index=e,i.animate?this.update():this.update(function(){this._enableAnimation()}),n.trigger("afterSlide",[r,e])},a.prototype.next=function(){this.move(this._index+1)},a.prototype.prev=function(){this.move(this._index-1)},a}(Mobify.$,Mobify.UI.Utils),function(t){t.fn.scooch=function(e,i){var n=t.extend({},t.fn.scooch.defaults);"object"==typeof e&&(t.extend(n,e,!0),i=null,e=null);var a=Array.prototype.slice.apply(arguments);return this.each(function(){var t=this._scooch;t||(t=new Mobify.UI.Scooch(this,n)),e&&(t[e].apply(t,a.slice(1)),"destroy"===e&&(t=null)),this._scooch=t}),this},t.fn.scooch.defaults={}}(Mobify.$);
"use strict";(function(){function t(){return o.indexOf("android")>-1?!0:!1}function e(){return o.indexOf("iphone")>-1||o.indexOf("ipad")>-1||o.indexOf("ipod")>-1?!0:!1}function i(){return o.indexOf("micromessenger")>-1?!0:!1}function n(){$(window).trigger("window:resize")}var o=window.navigator.userAgent.toLowerCase();window.onorientationchange!==void 0?(window.addEventListener("orientationchange",n,!1),t()&&window.addEventListener("resize",n,!1)):window.addEventListener("resize",n,!1),window.util={isAndroid:t,isIos:e,isWeixin:i}})();
"use strict";(function(){var t={curImage:$("#cur_img"),scoochContainer:$(".m-scooch"),maskContainer:$(".mask"),hotPictures:$(".hot_pictures_carousel"),isShowHotPictures:!1,init:function(){t.scoochContainer.length>0&&(t.isShowHotPictures=!0),t.loadImage(),t.initScooch(),t.bindEvent(),t.resize()},getScreenWidth:function(){return util.isAndroid()||util.isIos()?$(window).width():"320"},bindEvent:function(){var e=$(".hot_pictures img"),i=$(".m-scooch-close");$(window).on("window:resize",function(){t.resize()}),$(window).on("mask:hide",function(){t.hideCarousel()}),e.on("click",function(){var e=$(this).data("index");return $(".m-scooch").scooch("move",e,{animate:!1}),t.showCarousel(),!1}),i.on("click",function(){return t.hideCarousel(),!1})},loadImage:function(){var t=10;util.isAndroid()&&util.isWeixin()&&(t=200),setTimeout(function(){var t=$(".lazyload");t.each(function(){$(this).attr("src",$(this).data("src")),$(this).on("load",function(){}),$(this).on("error",function(){})})},t),$("#btn_mark_download").css({bottom:0})},initScooch:function(){var e=t.getScreenWidth();t.isShowHotPictures&&t.scoochContainer.css({width:e,height:e}).scooch()},showCarousel:function(){t.maskContainer.show(),t.resetHotPicturesPosition()},resetHotPicturesPosition:function(){var e=$(window).height(),i=this.getScreenWidth()+60;t.maskContainer.show(),t.isShowHotPictures&&t.hotPictures.css({top:(e-i)/2}).addClass("open").show()},hideCarousel:function(){t.maskContainer.hide(),t.isShowHotPictures&&t.hotPictures.removeClass("open").hide()},resize:function(){setTimeout(function(){var e=t.getScreenWidth(),i=$(".rightTag"),n=$(".leftTag");t.curImage.css({width:e,height:e}),t.isShowHotPictures&&t.scoochContainer.css({width:e,height:e}).scooch("refresh"),i.each(function(){var t,i,n,a=$(this);a.show(),t=""===a.data("width")||isNaN(a.data("width"))?a.find(".tagContentInfo").width():parseInt(a.data("width"),10),i=parseInt(a.data("left"),10),n=parseInt(a.data("top"),10),""===a.data("width")&&a.data("width",t),a.css({left:i/300*e-t-22,top:n/300*e+18})}),n.each(function(){var t,i,n,a=$(this);a.show(),t=a.width(),i=parseInt(a.data("left"),10),n=parseInt(a.data("top"),10),a.css({left:i/300*e-15,top:n/300*e-15})}),t.isShowHotPictures&&t.hotPictures.hasClass("open")&&t.resetHotPicturesPosition()},500)}};t.init()})();